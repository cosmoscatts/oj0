---
outline: deep
---

# 核心业务流程

<br>

> 梳理 `OJ` 系统的核心业务。

## 实现核心

- 权限校验

不用的角色对应的页面也不同，管理员可以修改、发布题目；而用户只能做题。

- 代码沙箱

需要考虑用户代码的安全性，如果用户提交了危险代码（写个木马文件、修改系统权限等），这将影响我们服务器的正常运行；沙箱是一个隔离的、安全的环境，用户的代码不会影响到沙箱之外的系统的运行，因此，使用代码沙箱来隔离用户代码是十分有必要的。

- 判题规则

输入、输出用例来判断用户的代码是否正确；时间限制、内存限制来判断用户的代码是否符合要求。

- 任务调度

服务器资源有限，用户要排队，按照顺序去依次执行判题，而不应该直接拒绝。


## 流程图

![核心业务流程图](/public/intros/business/img1.png)

:::tip 为什么要编译？
因为有些语言需要编译之后才能运行。
:::

<br>

![核心业务流程图](/public/intros/business/img2.jpg)

:::tip
**判题服务：** 判断用户的答案是否正确：获取题目信息、预计的输入输出结果，判断后返回给主业务后端。
:::

:::tip
**代码沙箱：** 只负责运行代码，给出代码运行结果，不负责具体业务，答题正确与否交给判题服务来判断。
:::

:::danger 这样做的好处是什么？
实现了功能的**解耦**，将代码沙箱从判题服务中剥离，代码沙箱只负责运行代码，返回运行结果，不涉及任务业务，可作为单独服务对外提供。
:::
